<!DOCTYPE html>
<head>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
 <div id="result"></div>
 <form>
    Current loan amount: $
    <input type="text" id="loanAmount"> 
    <br>
    What day was the loan at this amount?: 
    <input type="date" id="currentLoanDate">
    <br>
    What day of month is the loan payment on?: 
    <input type="number" id="monthlyPaymentDate" min="1" max="28">
    <br>
    &nbsp;(max choice of 28 days because of February)
    <br>
    Annual Percentage Rate (APR): 
    <input type="text" id="apr">%
    <br>
    Time duration, in years, desired to model the differing payment methods:
    <input type="number" id="timeDuration" min="1" max="100">
    <br> 
    <input type="button" id="button" value="Save">
    <br><br>
 </form>

  

  <div id="myDiv" style="width: 480px; height: 400px;"><!-- Plotly chart will be drawn inside this DIV --></div>
  <script>
    function doFirst() {
      var button = document.getElementById("button");
      button.addEventListener("click", saveCrap, false);
    }

    function saveCrap() {
      loanAmount = document.getElementById("loanAmount");
      loanAmount = loanAmount.value;

      currentLoanDate = document.getElementById("currentLoanDate");
      currentLoanDate = currentLoanDate.value;

      monthlyPaymentDate = document.getElementById("monthlyPaymentDate");
      monthlyPaymentDate = monthlyPaymentDate.value;

      apr = document.getElementById("apr");
      apr = apr.value;

      timeDuration = document.getElementById("timeDuration");
      timeDuration = timeDuration.value;  

      alert(loanAmount + ", " + currentLoanDate + ", " + monthlyPaymentDate + ", " + apr + ", " + timeDuration);

      //Store
      sessionStorage.loanAmount = loanAmount;
      sessionStorage.currentLoanDate = currentLoanDate;
      sessionStorage.monthlyPaymentDate = monthlyPaymentDate;
      sessionStorage.apr = apr;
      sessionStorage.timeDuration = timeDuration;

      //Retrieve
      document.getElementById("result").innerHTML = sessionStorage.currentLoanDate;

      Plotly.newPlot('myDiv', data);
    }

    window.addEventListener("load", doFirst, false);

    // var apr = 10;
    // var apr = document.getElementById("apr").value;
    // function aprTOdpr(apr) { 
    //   var dpr = apr/365;
    //   return dpr;
    //}
    

    var dailyTrace = {
      x: [sessionStorage.currentLoanDate, '2015-11-04', '2015-12-04'],
      y: [1, 3, 6],
      name: 'Daily Payments',
      type: 'scatter'
    };

    var monthlyTrace = {
      x: [sessionStorage.currentLoanDate, '2015-11-04', '2015-12-04'],
      y: [4, 7, 9],
      name: 'Monthly Payments',
      type: 'scatter'
    };

  var data = [dailyTrace, monthlyTrace];
  // Plotly.newPlot('myDiv', data);
  </script>
</body>